# Secure-authentication-3

В рамках данной лабораторной работы на основе приложения из [Лабораторной №2](https://edu.mmcs.sfedu.ru/mod/assign/view.php?id=27648) требуется:

1. Реализовать управление настройками приложения на основе EncryptedSharedPreferences.
На экране настроек добавить следующие пункты с возможностью их изменения:

1.1. Флаг "скрыть чувствительные данные"
Если это значение установлено, в окне просмотра данных о товаре скрыть данные поставщика (заблюрить, заменить звездочкам, сделать что-то, чтобы было понятно, что данные есть, "но я вам их не покажу").

1.2. Флаг "запретить отправку данных из приложения"
Если это значение установлено, в окне просмотра данных о товаре сделать кнопку "Поделиться\Share" неактивной, повесить (опционально) на нее сообщение о недоступности в связи с соответствующей настройкой.

1.3. Флаг "Использовать дефолтную количество" и поле "дефолтное количество товара"
Если флаг установлен, в окне создания товара в поле количества товара подставлять значение этого параметра из настроек

2. Реализовать загрузку товаров из зашифрованных файлов
  Добавить в модель товара поле с указанием на способ создания товара:
    - Поле может принимать два возможных значения: manual и file
    - Значение поля по умолчанию = manual
  Добавить в окно просмотра данных о товаре кнопку "сохранить в файл", которая будет работать следующим образом:
    - Открывается диалог с запросом места сохранения файла в Shared Storage
    - Объект данных товара с данными сериализуется в JSON
    - Сериализованный объект сохраняется в указанный файл, зашифрованный стандартным алгоритмом с мастер-ключом приложения
    - Сериализованный объект можно сохранить сначала в файл кеша приложения, а затем его содержимое записать в выбранный пользователем в Shared storage.
  Добавить в окно создания товара верхнее меню с кнопкой "Загрузить из зашифрованного файла", которая будет работать следующим образом:
    - Открывается диалог с запросом выбора сохраненного файла в Shared Storage
    - Файл расшифровывается стандартным алгоритмом с мастер-ключом приложения
    - Расшифрованные данные десериализуются из JSON 
    - Десериализованный объект сохраняется в базу товаров
    - Кнопку загрузки из файла можно разместить как в окне создания товара, так и на главной странице приложения во вспомогательном меню.
  Изменить поведение метода создания товара:
    - Если товар был создан вручную, задать значение поля источника как manual
    - Если товар был загружен из файла, задать значение поля источника как file
  Добавить в окно просмотра данных о товаре источник данных о товаре: ручное заполнение или загрузка из файла
  При изменении данных товара в окне редактирования - не позволять ни ручное, ни автоматическое изменение значения поля источника данных 
